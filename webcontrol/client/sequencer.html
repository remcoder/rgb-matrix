<!--

  Sequencer 

  - 2 types of patterns
    - standard
    - dynamic (generated code sequences by eval'ing a javascript function)
  - sequence, consisting of patterns

  var Sequence {
    title : 'kitt scanner',
    patterns: []
  }

  - Pattern: list of Steps
  - Step:
    - timecode
    - list of opcodes + data

-->

<template name="sequencer">
  {{> generator }}
  {{#with currentPattern}}
    <div class="preview">        
      {{#each steps}}
        {{#if current}}
          preview&nbsp;&nbsp;<img src="{{_image}}"/>
        {{/if}}
      {{/each}}
    </div>

    <div class="sequencer">
      <button data-action="play">play</button>
      <button data-action="resume">resume</button>
      <button data-action="pause">stop</button>
      <table>
        <tbody>
          <tr>
            <th>time</th>
            <th>opcode</th>
            <th>data</th>
          </tr>
        </tbody>
        
        {{#each steps}}
          <tbody class="step {{#if current}}current{{/if}}">
          {{#each opcodes}}
            <tr class="opcode">
              <td class="time">{{../time}}</td>
              <td class="opcode">{{opcode}}</td> 
              <td class="img"><img src="{{../_image}}"/></td> 
              <td class="data">{{data}}</td>
            </tr>
          {{/each}}
          </tbody>
        {{/each}}
            
      </table>
    </div>
  {{/with}}
</template>
